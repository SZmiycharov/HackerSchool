<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Generated form</title>
    <link rel="stylesheet" style="text/css" href="deps/opt/bootstrap.css" />
  </head>
  <body>
    <table width=100% height=100%>
            <tr>
                <td width=50%>
                <form id="form1" onsubmit="GenerateSecondForm();" action="">
                    <input placeholder="Title" type="text" name="title"><br><br>

                    <select name="type">
                        <option selected="selected" disabled>Select type</option>
                        <option label="text" value="text">text</option>
                        <option label="textarea" value="textarea">textarea</option>
                        <option label="number" value="number">number</option>
                        <option label="email" value="email">email</option>
                        <option label="password" value="password">password</option>
                        <option label="dropdown" value="dropdown">dropdown</option>
                        <option label="radios" value="radios">radios</option>
                        <option label="radios-inline" value="radios-inline">radios-inline</option>
                        <option label="radiobuttons" value="radiobuttons">radiobuttons</option>
                        <option label="checkbox" value="checkbox">checkbox</option>
                        <option label="checkboxes" value="checkboxes">checkboxes</option>
                        <option label="boolean" value="boolean">boolean</option>
                        <option label="date" value="date">date</option>
                        <option label="time" value="time">time</option>
                        <option label="date-time" value="date-time">date-time</option>
                        <option label="button" value="button">button</option>
                        <option label="submit" value="submit">submit</option>
                        <option label="reset" value="reset">reset</option>
                        <option label="help" value="help">help</option>
                        <option label="template" value="template">template</option>
                    </select><br><br>

                    <input placeholder="Key (Unique identifier)" type="text" name="key"><br><br>

                    <input class="longtext" id="description" placeholder="Description" type="text" name="description"><br><br>

                    <label><input type="checkbox" name="hidetitle">Don't show title</label><br><br>
                    <label><input id="showadvancedoptions" type="checkbox" name="showadvancedoptions" onclick="showAdvancedOptions();">Show advanced options</label><br><br>
                    
                    
                    <!-- When showadvancedoptions is checked show below content -->

                    <!--
                    <div id="advancedoptions" hidden="True">
                        <label><input type="checkbox" name="disablesuccess">Disable success state</label><br><br>
                        <label><input type="checkbox" name="disableerror">Disable error state</label><br><br>
                        <label><input type="checkbox" name="readonly">Readonly</label><br><br>

                        <input class="longtext" id="validationmessage" placeholder="Validation message" type="text" name="validationmessage"><br><br>
                        <h5>A custom validation error message. It can be a string, an object with error codes as key and<br> messages as values or a custom message function</h5>

                        <input class="longtext" id="onchange" placeholder="onChange" type="text" name="onchange"><br><br>
                        <h5>onChange event handler, expression or function. For expression, modelValue and form are <br>both available. For a function, they will be passed as parameters in that order</h5>

                        <input class="shorttext" id="feedbackicon" placeholder="Feedback Icon" type="text" name="feedbackicon"><br><br>
                        <h5>Inline feedback icons. To turn off just set feedback to false. If set to a string that string<br> is evaluated by a ngClass in the decorators scope. If not set att all the default value<br> is { "glyphicon": true, "glyphicon-ok": hasSuccess(), "glyphicon-remove": hasError() }</h5>

                        <input class="shorttext" id="placeholder" placeholder="Placeholder" type="text" name="placeholder"><br><br>
                        <h5>Placeholder on inputs and textarea</h5>

                        <input class="longtext" id="ngmodeloptions" placeholder="ng-Model Options" type="text" name="ngmodeloptions"><br><br>
                        <h5>Passed along to ng-model-options</h5>

                        <input class="shorttext" id="classoffield" placeholder="Class" type="text" name="classoffield"><br><br>
                        <h5>CSS Class(es) to be added to the container div e.g. : 'street foobar'</h5>

                        <input class="shorttext" id="destroystrategy" placeholder="Destroy strategy" type="text" name="destroystrategy"><br><br>
                        <h5>One of <code>null</code>, <code>empty</code> , <code>remove</code>, or <code>retain</code>. <br>Changes model on $destroy event. default is <code>remove</code></h5>

                        <input class="shorttext" id="copyvalueto" placeholder="Copy Value To" type="text" name="copyvalueto"><br><br>
                        <h5>Copy values to these schema keys e.g ['address.street']. The receiving fields can be shown, <br>but the intent for them is to be hidden.</h5>

                        <input class="shorttext" id="fieldclass" placeholder="Field Class" type="text" name="fieldclass"><br><br>
                        <h5>CSS Class(es) to be added to field input (or similar)</h5>

                        <input class="shorttext" id="labelclass" placeholder="Label Class" type="text" name="labelclass"><br><br>
                        <h5>CSS Class(es) to be added to the label of the field (or similar)</h5>

                        <input class="shorttext" id="condition" placeholder="Condition" type="text" name="condition"><br><br>
                        <h5>Show or hide field depending on an angular expression e.g 'model.age &lt; 18'. <br>The expression has access to <code>model</code>, <code>modelValue</code>, <code> arrayIndex</code>.  The condition need not<br> reference a model value it could be anything on scope.</h5>

                        <input class="shorttext" id="fieldaddonleft" placeholder="Field Addon - Left" type="text" name="fieldaddonleft"><br><br>
                        <h5>Add html code to left of input field. For reference check <a target="_blank" href="http://getbootstrap.com/components/#input-groups">bootstrap input groups</a></h5>

                        <input class="shorttext" id="fieldaddonright" placeholder="Field Addon - Right" type="text" name="fieldaddonright"><br><br>
                        <h5>Add html code to right of input field. For reference check <a target="_blank" href="http://getbootstrap.com/components/#input-groups">bootstrap input groups</a></h5>
                    </div>//-->


                  <input type="submit">
                </form>   

                <form id="form2"></form>
            </td>

            <td width=50%>
                <h1>Preview:</h1>
            </td>
        </tr>
    </table>

    <script type="text/javascript" src="deps/jquery.min.js"></script>
    <script type="text/javascript" src="deps/underscore.js"></script>
    <script type="text/javascript" src="deps/opt/jsv.js"></script>
    <script type="text/javascript" src="lib/jsonform.js"></script>
    <script type="text/javascript">

      window.onload = GenerateTextForm;

      function getParameterByName(name, url) {
        if (!url) url = window.location.href;
        name = name.replace(/[\[\]]/g, "\\$&");
        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
            results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, " "));
      }    

      var title = getParameterByName('title');
      var type = getParameterByName('type');
      var key = getParameterByName('key');
      var description = getParameterByName('description');
      var hidetitle = getParameterByName('hidetitle');
      var disablesuccess = getParameterByName('disablesuccess');
      var disableerror = getParameterByName('disableerror');
      var readonly = getParameterByName('readonly');
      var validationmessage = getParameterByName('validationmessage');
      var onchange = getParameterByName('onchange');
      var feedbackicon = getParameterByName('feedbackicon');
      var placeholder = getParameterByName('placeholder');
      var ngmodeloptions = getParameterByName('ngmodeloptions');
      var classoffield = getParameterByName('classoffield');
      var destroystrategy = getParameterByName('destroystrategy');
      var copyvalueto = getParameterByName('copyvalueto');
      var fieldclass = getParameterByName('fieldclass');
      var labelclass = getParameterByName('labelclass');
      var condition = getParameterByName('condition');
      var fieldaddonleft = getParameterByName('fieldaddonleft');
      var fieldaddonright = getParameterByName('fieldaddonright');


      function showAdvancedOptions(){
              if(document.getElementById('showadvancedoptions').checked) {
                  $("#advancedoptions").show();
              } else {
                  $("#advancedoptions").hide();
              }
      };

      function handleTextType(){
          console.log('1');
          var element = document.getElementById("p1");
          element.innerHTML = "New text!";
      }

      function handleTextAreaType(){
          console.log('2');
          var element = document.getElementById("p1");
          element.innerHTML = "New text!";
      }

      function handleNumberType(){
          console.log('3');
          var element = document.getElementById("p1");
          element.innerHTML = "New text!";
      }

      function handleEmailType(){
          console.log('4');
          var element = document.getElementById("p1");
          element.innerHTML = "New text!";
      }

      function handlePasswordType(){
          console.log('5');
          var element = document.getElementById("p1");
          element.innerHTML = "New text!";
      }

      function handleDropdownType(){
          console.log('6');
          var element = document.getElementById("p1");
          element.innerHTML = "New text!";
      }

      function handleRadiosType(){
          console.log('7');
          var element = document.getElementById("p1");
          element.innerHTML = "New text!";
      }

      function handleRadiosInlineType(){
          console.log('8');
          var element = document.getElementById("p1");
          element.innerHTML = "New text!";
      }

      function handleRadioButtonsType(){
          console.log('9');
          var element = document.getElementById("p1");
          element.innerHTML = "New text!";
      }

      function handleCheckboxType(){
          console.log('10');
          var element = document.getElementById("p1");
          element.innerHTML = "New text!";
      }

      function handleCheckboxesType(){
          console.log('11');
          var element = document.getElementById("p1");
          element.innerHTML = "New text!";
      }

      function handleBooleanType(){
          console.log('12');
          var element = document.getElementById("p1");
          element.innerHTML = "New text!";
      }

      function handleDateType(){
          console.log('13');
          var element = document.getElementById("p1");
          element.innerHTML = "New text!";
      }

      function handleTimeType(){
          console.log('14');
          var element = document.getElementById("p1");
          element.innerHTML = "New text!";
      }

      function handleDateTimeType(){
          console.log('15');
          var element = document.getElementById("p1");
          element.innerHTML = "New text!";
      }

      function handleButtonType(){
          console.log('16');
          var element = document.getElementById("p1");
          element.innerHTML = "New text!";
      }

      function handleSubmitType(){
          console.log('17');
          var element = document.getElementById("p1");
          element.innerHTML = "New text!";
      }

      function handleResetType(){
          console.log('18');
          var element = document.getElementById("p1");
          element.innerHTML = "New text!";
      }

      function handleHelpType(){
          console.log('19');
          var element = document.getElementById("p1");
          element.innerHTML = "New text!";
      }

      function handleTemplateType(){
          console.log('20');
          var element = document.getElementById("p1");
          element.innerHTML = "New text!";
      }

      
      
      

      function GenerateSecondForm(){
        var type = getParameterByName('type');
        switch(type){
          case 'text':
              console.log('type is text; calling GenerateTextForm');
              GenerateTextForm(); break;
          case 'textarea':
              handleTextAreaType(); break;
          case 'number':
              handleNumberType(); break;
          case 'email':
              handleEmailType(); break;
          case 'password':
              handlePasswordType(); break;
          case 'dropdown':
              handleDropdownType(); break;
          case 'radios':
              handleRadiosType(); break;
          case 'radios-inline':
              handleRadiosInlineType(); break;
          case 'radiobuttons':
              handleRadioButtonsType(); break;
          case 'checkbox':
              handleCheckboxType(); break;
          case 'checkboxes':
              handleCheckboxesType(); break;
          case 'boolean':
              handleBooleanType(); break;
          case 'date':
              handleDateType(); break;
          case 'time':
              handleTimeType(); break;
          case 'date-time':
              handleDateTimeType(); break;
          case 'button':
              handleButtonType(); break;
          case 'submit':
              handleSubmitType(); break;
          case 'reset':
              handleResetType(); break;
          case 'help':
              handleHelpType(); break;
          case 'template':
            handleTemplateType(); break;       
        }
    }

    function GenerateTextForm(){
        console.log('in GenerateTextForm; making form now');

        type = getParameterByName('type')
        if (type){
          $('#form1').hide();
          $('#form2').jsonForm({
            schema: {
              name: {
                id: 'string',
                title: 'Name',
                required: true
              },
              age: {
                type: 'number',
                title: 'Age'
              }
            },
            onSubmit: function (errors, values) {
              if (errors) {
                $('#res').html('<p>I beg your pardon?</p>');
              }
              else {
                console.log(values.name + ' ' + values.age);
              }
            }
          });
        }
        else{
          $('#form2').hide();
        }
      }



    </script>
  </body>
</html>